<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head><style type="text/css">
pre {background-color: #e0e0e0}
</style>

<link rel="STYLESHEET" href="pychart.css" type='text/css' />
<link rel="first" href="pychart.html" title='PyChart' />
<link rel='index' href='genindex.html' title='Index' />
<link rel='last' href='about.html' title='About this document...' />
<link rel='help' href='about.html' title='About this document...' />
<link rel="next" href="module-axis.html" />
<link rel="prev" href="module-area.html" />
<link rel="parent" href="module-area.html" />
<link rel="next" href="module-axis.html" />
<meta name='aesop' content='information' />
<title>6.1 Specifying the coordinate system</title>
</head>
<body>
<DIV CLASS="navigation">
<div id='top-navigation-panel' xml:id='top-navigation-panel'>
<table align="center" width="100%" cellpadding="0" cellspacing="2">
<tr>
<td class='online-navigation'><a rel="prev" title="6 Area"
  href="module-area.html"><img src='previous.png'
  border='0' height='32'  alt='Previous Page' width='32' /></A></td>
<td class='online-navigation'><a rel="parent" title="6 Area"
  href="module-area.html"><img src='up.png'
  border='0' height='32'  alt='Up One Level' width='32' /></A></td>
<td class='online-navigation'><a rel="next" title="6.2 Axes"
  href="module-axis.html"><img src='next.png'
  border='0' height='32'  alt='Next Page' width='32' /></A></td>
<td align="center" width="100%">PyChart</td>
<td class='online-navigation'><img src='blank.png'
  border='0' height='32'  alt='' width='32' /></td>
<td class='online-navigation'><img src='blank.png'
  border='0' height='32'  alt='' width='32' /></td>
<td class='online-navigation'><a rel="index" title="Index"
  href="genindex.html"><img src='index.png'
  border='0' height='32'  alt='Index' width='32' /></A></td>
</tr></table>
<div class='online-navigation'>
<b class="navlabel">Previous:</b>
<a class="sectref" rel="prev" href="module-area.html">6 Area</A>
<b class="navlabel">Up:</b>
<a class="sectref" rel="parent" href="module-area.html">6 Area</A>
<b class="navlabel">Next:</b>
<a class="sectref" rel="next" href="module-axis.html">6.2 Axes</A>
</div>
<hr /></div>
</DIV>
<!--End of Navigation Panel-->

<H2><A NAME="SECTION000610000000000000000"></A><a id='l2h-52' xml:id='l2h-52'></a>
<BR>
6.1 Specifying the coordinate system
</H2>
<A NAME="module-coord"></A>
<a id='l2h-54' xml:id='l2h-54'></a><a id='l2h-55' xml:id='l2h-55'></a>

<P>
Attributes <code>x_coord</code> and <code>y_coord</code> specify the coordinate
systems for the area's X and Y axes. The values of these attributes
must of type <code>coord.T</code>.  PyChart provides three popular subclasses
of <code>coord</code>.  Both <code>x_coord</code> and <code>y_coord</code> defaults to
<code>linear_coord.T()</code>.

<P>
<dl><dt><b><span class="typelabel">class</span>&nbsp;<tt id='l2h-56' xml:id='l2h-56' class="class">linear_coord.T</tt></b>
<dd>
This class creates a linear coordinate system.

<P>
<div class="verbatim"><pre>
ar = <a href="module-area.html">area.T</a>(x_coord = <a href="module-coord.html">linear_coord.T</a>(), y_coord = <a href="module-coord.html">linear_coord.T</a>(), ...)
</pre></div>
</dl>

<P>
<dl><dt><b><span class="typelabel">class</span>&nbsp;<tt id='l2h-57' xml:id='l2h-57' class="class">log_coord.T</tt></b>
<dd>
This class displays a logarithmic coordinate system.
</dl>

<P>
<dl><dt><table cellpadding="0" cellspacing="0"><tr valign="baseline">
  <td><nobr><b><span class="typelabel">class</span>&nbsp;<tt id='l2h-58' xml:id='l2h-58' class="class">category_coord.T</tt></b>(</nobr></td>
  <td><var>data, col</var>)</td></tr></table></dt>
<dd>
This class defines a ``categorical'' coordinate system, in which the
axis only takes discrete values. This class takes two constructors:
<var>data</var> ( see Section&nbsp;<A href="module-chart-data.html#module-chart-data">5</A>) and column <var>col</var>
from which the axis values are
extracted from the data. See the following example:
../demos/categbar.py

<P>
<div class="verbatim"><pre>
from pychart import *
<a href="options.html"><a href="options.html">theme.</a>get_options</a>()
data = [["Jan", 10], ["Feb", 22], ["Mar", 30]]

ar = <a href="module-area.html">area.T</a>(x_coord = <a href="module-coord.html">category_coord.T</a>(data, 0), y_range = (0, None),
            x_axis = <a href="module-axis.html">axis.</a>X(label="Month"),
            y_axis = <a href="module-axis.html">axis.</a>Y(label="Value"))
ar.add_plot(<a href="module-bar-plot.html">bar_plot.T</a>(data = data, label = "Something"))
ar.draw()
</pre></div>

<P>
The output will look like the below:

<P>
<IMG
  WIDTH="463" HEIGHT="285" ALIGN="BOTTOM" BORDER="0"
 SRC="./categbar.png"
 ALT="Image categbar">

<P>
</dl>

<P>

<P>
All the classes described so far are derived from the <code>coord.T</code> class:

<P>
<dl><dt><table cellpadding="0" cellspacing="0"><tr valign="baseline">
  <td><nobr><b><span class="typelabel">class</span>&nbsp;<tt id='l2h-59' xml:id='l2h-59' class="class">coord.T</tt></b>(</nobr></td>
  <td><var></var>)</td></tr></table></dt>
<dd>
This is an abstract base class that defines methods for
calculating the mapping between sample values and coordinates.
Every <code>coord.T</code> object must implement the following three methods:
</dl>

<P>
<dl><dt><table cellpadding="0" cellspacing="0"><tr valign="baseline">
  <td><nobr><b><tt id='l2h-60' xml:id='l2h-60' class="method">get_data_range</tt></b>(</nobr></td>
  <td><var>dmin, dmax, interval</var>)</td></tr></table></dt>
<dd>
This method should compute the minimum and maximum values that are to be
displayed on the canvas. <var>dmin</var>, <var>dmax</var>
are the minimum and maximum values found
in the sample data given to the plots. <var>interval</var> is the value of
the area's <code>x_grid_interval</code> (or <code>y_grid_interval</code>)
attribute ( see Section&nbsp;<A href="module-area.html#module-area">6</A>),
or <code>None</code> if the
attribute is omitted by the user. This method should return tuple
(MIN, MAX, INTERVAL), where MIN, MAX are the minimum and maximum values
to be displayed, and INTERVAL is the interval with which label and tick lines
are drawn.
</dl>

<P>
<dl><dt><table cellpadding="0" cellspacing="0"><tr valign="baseline">
  <td><nobr><b><tt id='l2h-61' xml:id='l2h-61' class="method">get_canvas_pos</tt></b>(</nobr></td>
  <td><var>size, val, range</var>)</td></tr></table></dt>
<dd>
This method converts a data value (<var>val</var>) to canvas location.
Parameter <var>size</var> is the size of the
axis, either X or Y, and <var>range</var> is the minimum and maximum sample
values obtained by calling <code>self.get_data_range</code>.
</dl>

<P>
<dl><dt><table cellpadding="0" cellspacing="0"><tr valign="baseline">
  <td><nobr><b><tt id='l2h-62' xml:id='l2h-62' class="method">get_tics</tt></b>(</nobr></td>
  <td><var>range, interval</var>)</td></tr></table></dt>
<dd>
This method should return the list of values (not canvas locations) at which
labels and ``tick'' lines are drawn. Parameters <var>range</var> and
<var>interval</var> are the
values returned by get_data_range.
</dl>

<P>
You can create fancier coordinate systems by subtyping <code>coord.T</code>.
The below example shows how you can create a chart with ``zap'' marks.

<P>
<IMG
  WIDTH="467" HEIGHT="339" ALIGN="BOTTOM" BORDER="0"
 SRC="./zaptest.png"
 ALT="Image zaptest">

<P>
../demos/zaptest.py

<P>
<div class="verbatim"><pre>
from pychart import *

class zap_y_coord(<a href="module-coord.html">linear_coord.T</a>):
    # Method get_data_range is inherited from <a href="module-coord.html">linear_coord.T</a>.
    def get_canvas_pos(self, size, val, min, max):
        # Zap Y values between 70 and 240.
        # Thus, Y axis will display 0..70 and 240..280, 110 points total.
        if val &lt;= 70:
            return <a href="module-coord.html">linear_coord.T</a>.get_canvas_pos(self, size, val, 0, 110)
        elif val &lt;= 240:
            return <a href="module-coord.html">linear_coord.T</a>.get_canvas_pos(self, size, 70, 0, 110)
        else:
            return <a href="module-coord.html">linear_coord.T</a>.get_canvas_pos(self, size, val - 170, 0, 110)
    def get_tics(self, min, max, interval):
        # Don't draw tick marks between 65 and 245.
        tics = <a href="module-coord.html">linear_coord.T</a>.get_tics(self, min, max, interval)
        return [x for x in tics if x &lt; 65 or x &gt; 256]

can = <a href="module-canvas.html">canvas.</a>default_canvas()
<a href="options.html"><a href="options.html">theme.</a>get_options</a>()
data = [(10, 20, 30, 5), (20, 265, 33, 5),
        (30, 255, 30, 5), (40, 45, 51, 7), (50, 25, 27, 3)]

chart_object.set_defaults(<a href="module-area.html">area.T</a>, size = (150, 120), y_range = (0, 280),
                          y_coord = zap_y_coord(),
                          x_coord = <a href="module-coord.html">category_coord.T</a>(data, 0))
chart_object.set_defaults(<a href="module-bar-plot.html">bar_plot.T</a>, data = data)

bar_plot.fill_styles.reset();
plot1=<a href="module-bar-plot.html">bar_plot.T</a>(label="foo", cluster=(0,3))
plot2=<a href="module-bar-plot.html">bar_plot.T</a>(label="bar", hcol=2, cluster=(1,3))
plot3=<a href="module-bar-plot.html">bar_plot.T</a>(label="baz", hcol=3, cluster=(2,3))

ar = <a href="module-area.html">area.T</a>(loc=(250,0),
            x_axis=<a href="module-axis.html">axis.</a>X(label="X label", format="/a-30{}%d"),
            y_axis=<a href="module-axis.html">axis.</a>Y(label="Y label", tic_interval=10))
ar.add_plot(plot1, plot2, plot3)
ar.draw()
for x in (ar.x_pos(10) - 20, ar.x_pos(20)- 10, ar.x_pos(30) - 10):
    <a href="module-zap.html">zap.</a>zap_horizontally(can, <a href="module-line-style.html">line_style.</a>default, <a href="module-fill-style.html">fill_style.</a>white,
                         x, ar.y_pos(65), x+16, ar.y_pos(65) + 4, 4, 4)
</pre></div>

<P>

<DIV CLASS="navigation">
<div class='online-navigation'>
<p></p><hr />
<table align="center" width="100%" cellpadding="0" cellspacing="2">
<tr>
<td class='online-navigation'><a rel="prev" title="6 Area"
  href="module-area.html"><img src='previous.png'
  border='0' height='32'  alt='Previous Page' width='32' /></A></td>
<td class='online-navigation'><a rel="parent" title="6 Area"
  href="module-area.html"><img src='up.png'
  border='0' height='32'  alt='Up One Level' width='32' /></A></td>
<td class='online-navigation'><a rel="next" title="6.2 Axes"
  href="module-axis.html"><img src='next.png'
  border='0' height='32'  alt='Next Page' width='32' /></A></td>
<td align="center" width="100%">PyChart</td>
<td class='online-navigation'><img src='blank.png'
  border='0' height='32'  alt='' width='32' /></td>
<td class='online-navigation'><img src='blank.png'
  border='0' height='32'  alt='' width='32' /></td>
<td class='online-navigation'><a rel="index" title="Index"
  href="genindex.html"><img src='index.png'
  border='0' height='32'  alt='Index' width='32' /></A></td>
</tr></table>
<div class='online-navigation'>
<b class="navlabel">Previous:</b>
<a class="sectref" rel="prev" href="module-area.html">6 Area</A>
<b class="navlabel">Up:</b>
<a class="sectref" rel="parent" href="module-area.html">6 Area</A>
<b class="navlabel">Next:</b>
<a class="sectref" rel="next" href="module-axis.html">6.2 Axes</A>
</div>
</div>
<hr />
<span class="release-info">Documentation released on July 2, 2005.</span>
</DIV>
<!--End of Navigation Panel-->

</BODY>
</HTML>
